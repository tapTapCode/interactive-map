<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>California Counties Interactive Map</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: #f5f5f5;
            padding: 20px;
            min-height: 100vh;
        }

        .map-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 30px;
            position: relative;
        }

        .map-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .map-header h1 {
            color: #333;
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .map-header p {
            color: #666;
            font-size: 1rem;
        }

        .map-wrapper {
            position: relative;
            width: 100%;
            height: auto;
            margin: 0 auto;
            background: #fafafa;
            border-radius: 8px;
            padding: 20px;
            overflow: hidden;
        }

        .map-svg {
            width: 100%;
            height: auto;
            display: block;
            margin: 0 auto;
        }

        .region {
            fill: #e0e0e0;
            stroke: #ffffff;
            stroke-width: 1.5;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .region:hover {
            fill: #4a90e2;
            stroke: #2c5aa0;
            stroke-width: 2.5;
            filter: brightness(1.1);
        }

        .region.active {
            fill: #2c5aa0;
            stroke: #1a3d6b;
            stroke-width: 2.5;
        }

        .region.selected {
            fill: #27ae60;
            stroke: #1e8449;
            stroke-width: 2.5;
        }

        .tooltip {
            position: absolute;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 12px 16px;
            border-radius: 8px;
            font-size: 14px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s ease;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            max-width: 300px;
            line-height: 1.5;
        }

        .tooltip.visible {
            opacity: 1;
        }

        .tooltip-title {
            font-weight: bold;
            font-size: 16px;
            margin-bottom: 8px;
            color: #4a90e2;
        }

        .tooltip-content {
            font-size: 14px;
            color: #e0e0e0;
        }

        .tooltip-content p {
            margin: 4px 0;
        }

        .info-panel {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            max-width: 350px;
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            pointer-events: none;
            z-index: 100;
        }

        .info-panel.visible {
            opacity: 1;
            transform: translateY(0);
            pointer-events: auto;
        }

        .info-panel h3 {
            color: #333;
            font-size: 1.3rem;
            margin-bottom: 12px;
            border-bottom: 2px solid #4a90e2;
            padding-bottom: 8px;
        }

        .info-panel .info-item {
            margin: 12px 0;
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }

        .info-panel .info-label {
            font-weight: 600;
            color: #666;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 4px;
        }

        .info-panel .info-value {
            color: #333;
            font-size: 1rem;
        }

        .info-panel .close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #999;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.2s ease;
        }

        .info-panel .close-btn:hover {
            background: #f0f0f0;
            color: #333;
        }

        .legend {
            margin-top: 20px;
            padding: 15px;
            background: #f9f9f9;
            border-radius: 8px;
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            color: #666;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
            border: 2px solid #fff;
        }

        @media (max-width: 768px) {
            .map-container {
                padding: 15px;
            }

            .map-header h1 {
                font-size: 1.5rem;
            }

            .info-panel {
                position: relative;
                top: auto;
                right: auto;
                max-width: 100%;
                margin-top: 20px;
            }

            .tooltip {
                max-width: 250px;
                font-size: 12px;
            }
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }

        .loading::after {
            content: '...';
            animation: dots 1.5s steps(4, end) infinite;
        }

        @keyframes dots {
            0%, 20% { content: '.'; }
            40% { content: '..'; }
            60%, 100% { content: '...'; }
        }
    </style>
</head>
<body>
    <div class="map-container">
        <div class="map-header">
            <h1>California Counties</h1>
            <p>Hover over counties to see details, click to select</p>
        </div>

        <div class="map-wrapper">
            <div class="loading" id="loading">Loading map</div>
            <svg class="map-svg" id="mapSvg" style="display: none;" viewBox="0 0 1000 1200" xmlns="http://www.w3.org/2000/svg">
                <!-- Simplified California counties - replace with actual SVG paths from your source -->
                <!-- This is a placeholder structure - you'll need to get real county boundaries -->
                <g class="regions-group">
                    <!-- Northern California Counties (simplified examples) -->
                    <path id="alameda" class="region" data-region-id="alameda" 
                          d="M 200 300 L 250 300 L 250 350 L 200 350 Z"/>
                    <path id="contra-costa" class="region" data-region-id="contra-costa" 
                          d="M 250 300 L 300 300 L 300 350 L 250 350 Z"/>
                    <path id="san-francisco" class="region" data-region-id="san-francisco" 
                          d="M 200 250 L 230 250 L 230 280 L 200 280 Z"/>
                    
                    <!-- Central California Counties -->
                    <path id="fresno" class="region" data-region-id="fresno" 
                          d="M 300 500 L 400 500 L 400 600 L 300 600 Z"/>
                    <path id="kern" class="region" data-region-id="kern" 
                          d="M 300 700 L 400 700 L 400 800 L 300 800 Z"/>
                    
                    <!-- Southern California Counties -->
                    <path id="los-angeles" class="region" data-region-id="los-angeles" 
                          d="M 200 900 L 350 900 L 350 1050 L 200 1050 Z"/>
                    <path id="orange" class="region" data-region-id="orange" 
                          d="M 350 1000 L 450 1000 L 450 1100 L 350 1100 Z"/>
                    <path id="san-diego" class="region" data-region-id="san-diego" 
                          d="M 250 1100 L 400 1100 L 400 1200 L 250 1200 Z"/>
                </g>
            </svg>
        </div>

        <div class="legend" id="legend" style="display: none;">
            <div class="legend-item">
                <div class="legend-color" style="background: #e0e0e0;"></div>
                <span>Default</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #4a90e2;"></div>
                <span>Hover</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #2c5aa0;"></div>
                <span>Active</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #27ae60;"></div>
                <span>Selected</span>
            </div>
        </div>
    </div>

    <div class="tooltip" id="tooltip"></div>
    <div class="info-panel" id="infoPanel">
        <button class="close-btn" id="closeBtn">&times;</button>
        <div id="infoContent"></div>
    </div>

    <script>
        // California Counties Data
        const mapData = {
            viewBox: "0 0 1000 1200",
            regions: [
                {
                    id: "alameda",
                    name: "Alameda County",
                    path: "M 200 300 L 250 300 L 250 350 L 200 350 Z",
                    data: {
                        population: "1,682,353",
                        area: "739 sq mi",
                        description: "Located in the San Francisco Bay Area, home to cities like Oakland and Berkeley.",
                        seat: "Oakland",
                        founded: "1853",
                        majorCities: ["Oakland", "Berkeley", "Fremont", "Hayward"],
                        contact: "info@acgov.org"
                    }
                },
                {
                    id: "contra-costa",
                    name: "Contra Costa County",
                    path: "M 250 300 L 300 300 L 300 350 L 250 350 Z",
                    data: {
                        population: "1,165,735",
                        area: "720 sq mi",
                        description: "East Bay county known for its diverse communities and strong economy.",
                        seat: "Martinez",
                        founded: "1850",
                        majorCities: ["Concord", "Richmond", "Antioch", "Walnut Creek"],
                        contact: "info@contracosta.ca.gov"
                    }
                },
                {
                    id: "san-francisco",
                    name: "San Francisco County",
                    path: "M 200 250 L 230 250 L 230 280 L 200 280 Z",
                    data: {
                        population: "873,965",
                        area: "47 sq mi",
                        description: "The City by the Bay - a major cultural, financial, and technological hub.",
                        seat: "San Francisco",
                        founded: "1850",
                        majorCities: ["San Francisco"],
                        contact: "info@sfgov.org"
                    }
                },
                {
                    id: "fresno",
                    name: "Fresno County",
                    path: "M 300 500 L 400 500 L 400 600 L 300 600 Z",
                    data: {
                        population: "1,008,654",
                        area: "5,963 sq mi",
                        description: "Central Valley county known for agriculture and growing urban center.",
                        seat: "Fresno",
                        founded: "1856",
                        majorCities: ["Fresno", "Clovis", "Selma"],
                        contact: "info@co.fresno.ca.us"
                    }
                },
                {
                    id: "kern",
                    name: "Kern County",
                    path: "M 300 700 L 400 700 L 400 800 L 300 800 Z",
                    data: {
                        population: "909,235",
                        area: "8,142 sq mi",
                        description: "Largest county by area, known for oil production and agriculture.",
                        seat: "Bakersfield",
                        founded: "1866",
                        majorCities: ["Bakersfield", "Ridgecrest", "Delano"],
                        contact: "info@kerncounty.com"
                    }
                },
                {
                    id: "los-angeles",
                    name: "Los Angeles County",
                    path: "M 200 900 L 350 900 L 350 1050 L 200 1050 Z",
                    data: {
                        population: "10,014,009",
                        area: "4,058 sq mi",
                        description: "Most populous county in the United States, home to Hollywood and diverse communities.",
                        seat: "Los Angeles",
                        founded: "1850",
                        majorCities: ["Los Angeles", "Long Beach", "Glendale", "Pasadena", "Santa Monica"],
                        contact: "info@lacounty.gov"
                    }
                },
                {
                    id: "orange",
                    name: "Orange County",
                    path: "M 350 1000 L 450 1000 L 450 1100 L 350 1100 Z",
                    data: {
                        population: "3,186,989",
                        area: "791 sq mi",
                        description: "Known for beautiful beaches, theme parks, and strong economy.",
                        seat: "Santa Ana",
                        founded: "1889",
                        majorCities: ["Anaheim", "Santa Ana", "Irvine", "Huntington Beach"],
                        contact: "info@ocgov.com"
                    }
                },
                {
                    id: "san-diego",
                    name: "San Diego County",
                    path: "M 250 1100 L 400 1100 L 400 1200 L 250 1200 Z",
                    data: {
                        population: "3,298,634",
                        area: "4,200 sq mi",
                        description: "Southernmost county with beautiful coastline, military presence, and biotech industry.",
                        seat: "San Diego",
                        founded: "1850",
                        majorCities: ["San Diego", "Chula Vista", "Oceanside", "Carlsbad"],
                        contact: "info@sandiegocounty.gov"
                    }
                }
            ]
        };

        class InteractiveMap {
            constructor(data) {
                this.data = data;
                this.svg = document.getElementById('mapSvg');
                this.tooltip = document.getElementById('tooltip');
                this.infoPanel = document.getElementById('infoPanel');
                this.infoContent = document.getElementById('infoContent');
                this.closeBtn = document.getElementById('closeBtn');
                this.selectedRegion = null;
                
                this.init();
            }

            init() {
                if (this.data.viewBox) {
                    this.svg.setAttribute('viewBox', this.data.viewBox);
                }

                this.setupEventListeners();

                document.getElementById('loading').style.display = 'none';
                this.svg.style.display = 'block';
                document.getElementById('legend').style.display = 'flex';
            }

            setupEventListeners() {
                this.svg.addEventListener('mouseover', (e) => {
                    if (e.target.classList.contains('region')) {
                        this.handleHover(e.target, e);
                    }
                });

                this.svg.addEventListener('mouseout', (e) => {
                    if (e.target.classList.contains('region')) {
                        this.handleMouseOut(e.target);
                    }
                });

                this.svg.addEventListener('mousemove', (e) => {
                    if (e.target.classList.contains('region') && this.tooltip.classList.contains('visible')) {
                        this.updateTooltipPosition(e);
                    }
                });

                this.svg.addEventListener('click', (e) => {
                    if (e.target.classList.contains('region')) {
                        this.handleClick(e.target);
                    }
                });

                this.closeBtn.addEventListener('click', () => {
                    this.closeInfoPanel();
                });

                document.addEventListener('click', (e) => {
                    if (!this.infoPanel.contains(e.target) && 
                        !e.target.classList.contains('region') &&
                        !e.target.closest('.region')) {
                        this.closeInfoPanel();
                    }
                });
            }

            handleHover(element, event) {
                const regionId = element.getAttribute('data-region-id');
                const region = this.data.regions.find(r => r.id === regionId);
                
                if (!region) return;

                element.classList.add('active');
                this.showTooltip(region, event);
            }

            handleMouseOut(element) {
                element.classList.remove('active');
                this.hideTooltip();
            }

            handleClick(element) {
                const regionId = element.getAttribute('data-region-id');
                const region = this.data.regions.find(r => r.id === regionId);
                
                if (!region) return;

                if (this.selectedRegion) {
                    const prevElement = this.svg.querySelector(`#${this.selectedRegion}`);
                    if (prevElement) {
                        prevElement.classList.remove('selected');
                    }
                }

                this.selectedRegion = regionId;
                element.classList.add('selected');
                element.classList.remove('active');

                this.showInfoPanel(region);
            }

            showTooltip(region, event) {
                this.tooltip.innerHTML = `
                    <div class="tooltip-title">${region.name}</div>
                    <div class="tooltip-content">
                        <p><strong>Population:</strong> ${region.data.population}</p>
                        <p><strong>Area:</strong> ${region.data.area}</p>
                    </div>
                `;
                
                this.tooltip.classList.add('visible');
                this.updateTooltipPosition(event);
            }

            updateTooltipPosition(event) {
                const rect = this.svg.getBoundingClientRect();
                const x = event.clientX - rect.left;
                const y = event.clientY - rect.top;
                
                this.tooltip.style.left = `${x + 15}px`;
                this.tooltip.style.top = `${y - 15}px`;
            }

            hideTooltip() {
                this.tooltip.classList.remove('visible');
            }

            showInfoPanel(region) {
                const citiesList = region.data.majorCities
                    .map(city => `<li>${city}</li>`)
                    .join('');

                this.infoContent.innerHTML = `
                    <h3>${region.name}</h3>
                    <div class="info-item">
                        <div class="info-label">Description</div>
                        <div class="info-value">${region.data.description}</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">County Seat</div>
                        <div class="info-value">${region.data.seat}</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Population</div>
                        <div class="info-value">${region.data.population}</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Area</div>
                        <div class="info-value">${region.data.area}</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Founded</div>
                        <div class="info-value">${region.data.founded}</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Major Cities</div>
                        <div class="info-value">
                            <ul style="margin: 8px 0; padding-left: 20px;">
                                ${citiesList}
                            </ul>
                        </div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Contact</div>
                        <div class="info-value">${region.data.contact}</div>
                    </div>
                `;

                this.infoPanel.classList.add('visible');
            }

            closeInfoPanel() {
                this.infoPanel.classList.remove('visible');
                
                if (this.selectedRegion) {
                    const element = this.svg.querySelector(`#${this.selectedRegion}`);
                    if (element) {
                        element.classList.remove('selected');
                    }
                    this.selectedRegion = null;
                }
            }
        }

        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', () => {
                new InteractiveMap(mapData);
            });
        } else {
            new InteractiveMap(mapData);
        }
    </script>
</body>
</html>

